# Solution

Create the namespace `ruby` using an imperative command.

```
$ kubectl create ns ruby
namespace/ruby created
```

Start by creating a YAML manifest file, e.g. in the file named `apache-pod.yaml`. Add the basic definition for the apache web server. The initial file contents could look as follows:

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: apache
  namespace: ruby
spec:
  containers:
  - name: apache
    image: httpd:2.4
```

Add the Volumes with their corresponding mount paths. The modified YAML manifest could look as shown below.

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: apache
  namespace: ruby
spec:
  containers:
  - name: apache
    image: httpd:2.4
    volumeMounts:
    - name: apache-run
      mountPath: /usr/local/apache2/logs
    - name: apache-cache
      mountPath: /usr/local/apache2/htdocs
    - name: apache-conf
      mountPath: /usr/local/apache2/conf
  volumes:
 - name: apache-run
    emptyDir: {}
  - name: apache-cache
    emptyDir: {}
  - name: apache-conf
    emptyDir: {}
```

For security reasons, it's advisable to make the [container's temporary file system read-only](https://kubernetes.io/docs/tasks/configure-pod-container/security-context/). You can do so by setting `spec.securityContext.readOnlyRootFilesystem` to `true`.

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: apache
  namespace: ruby
spec:
  containers:
  - name: apache
    image: httpd:2.4
    securityContext:
      readOnlyRootFilesystem: true
    volumeMounts:
    - name: apache-run
      mountPath: /usr/local/apache2/logs
    - name: apache-cache
      mountPath: /usr/local/apache2/htdocs
    - name: apache-conf
      mountPath: /usr/local/apache2/conf
  volumes:
  - name: apache-run
    emptyDir: {}
  - name: apache-cache
    emptyDir: {}
  - name: apache-conf
    emptyDir: {}
```

Create the Pod object and ensure that its status transitions into "Running".

```
$ kubectl apply -f apache-pod.yaml
pod/apache created
$ kubectl get pod apache -n ruby
C:\Users\VISHNU\mysite\rubesh\ckad-crash-course\exercises\05-ephemeral-volume\solution>kubectl get pod apache -n default
NAME     READY   STATUS             RESTARTS      AGE
apache   0/1     CrashLoopBackOff   5 (91s ago)   4m50s
```
